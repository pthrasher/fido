<!DOCTYPE html>  <html> <head>   <title>fido.h</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="fido.html">                 fido.c               </a>                                           <a class="source" href="fido.html">                 fido.h               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               fido.h             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Standard stuff for header files. If it's already defined, don't do it again.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#ifndef _fido_h</span>
<span class="cp">#define _fido_h</span>

<span class="cp">#include &quot;version.h&quot;</span>
<span class="cp">#include &quot;bit-array.h&quot;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fido_args</span> <span class="p">{</span>
  <span class="kt">uint32_t</span> <span class="n">port</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">origport</span><span class="p">;</span>
  <span class="kt">uint32_t</span> <span class="n">address</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">origaddress</span><span class="p">;</span>
  <span class="n">bit_array_num_t</span> <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">fido_args</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>Messages</h1>

<p>Here is where I define all of the banners/messages used when printing to the
console.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h3>Colors</h3>

<p>Just a simple list of colors defined for use in the below messages, or
anywhere else in the app for that matter.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define ANSI_COLOR_RED     &quot;\x1b[31m&quot;</span>
<span class="cp">#define ANSI_COLOR_GREEN   &quot;\x1b[32m&quot;</span>
<span class="cp">#define ANSI_COLOR_YELLOW  &quot;\x1b[33m&quot;</span>
<span class="cp">#define ANSI_COLOR_BLUE    &quot;\x1b[34m&quot;</span>
<span class="cp">#define ANSI_COLOR_MAGENTA &quot;\x1b[35m&quot;</span>
<span class="cp">#define ANSI_COLOR_CYAN    &quot;\x1b[36m&quot;</span>
<span class="cp">#define ANSI_COLOR_RESET   &quot;\x1b[0m&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h3>print_msg</h3>

<p>This is a generic printing function we'll use for printing anything out to
the console. This way we only have one place to change the fd we're printing
to.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kt">void</span> <span class="nf">print_msg</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">msg</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="kt">va_list</span> <span class="n">a_list</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">a_list</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
  <span class="n">vfprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">a_list</span><span class="p">);</span>
  <span class="n">va_end</span><span class="p">(</span><span class="n">a_list</span><span class="p">);</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h3>ohnoes</h3>

<p>This is a fun ascii art "OH NOES!" message that prints out any time we have
catastrophic failure.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">ohnoes</span> <span class="o">=</span> 
  <span class="n">ANSI_COLOR_RED</span>
  <span class="s">&quot;          ___           ___</span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;         /  /</span><span class="se">\\</span><span class="s">         /__/</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;        /  /::</span><span class="se">\\</span><span class="s">        </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;       /  /:/</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">        </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;      /  /:/  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">   ___ /  /::</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;     /__/:/ </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> /__/</span><span class="se">\\</span><span class="s">  /:/</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;     </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> /  /:/ </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/__</span><span class="se">\\</span><span class="s">/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;      </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">  /:/   </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;       </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/     </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;        </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/       </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;          ___           ___           ___           ___ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;         /__/</span><span class="se">\\</span><span class="s">         /  /</span><span class="se">\\</span><span class="s">         /  /</span><span class="se">\\</span><span class="s">         /  /</span><span class="se">\\</span><span class="s">     ___ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;         </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">       /  /::</span><span class="se">\\</span><span class="s">       /  /:/_       /  /:/_   /__/</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;          </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">     /  /:/</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">     /  /:/ /</span><span class="se">\\</span><span class="s">     /  /:/ /</span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;      _____</span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">   /  /:/  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">   /  /:/ /:/_   /  /:/ /::</span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;     /__/::::::::</span><span class="se">\\</span><span class="s"> /__/:/ </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> /__/:/ /:/ /</span><span class="se">\\</span><span class="s"> /__/:/ /:/</span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;     </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">~~</span><span class="se">\\</span><span class="s">~~</span><span class="se">\\</span><span class="s">/ </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> /  /:/ </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/ /:/ </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/~/:/   </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;      </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">  ~~~   </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">  /:/   </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/ /:/   </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/ /:/     </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;       </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">        </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/     </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">/:/     </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/ /:/          __ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;        </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">:</span><span class="se">\\</span><span class="s">        </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/       </span><span class="se">\\</span><span class="s">  </span><span class="se">\\</span><span class="s">::/        /__/:/          /__/</span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/         </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/           </span><span class="se">\\</span><span class="s">__</span><span class="se">\\</span><span class="s">/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="n">ANSI_COLOR_RESET</span><span class="p">;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">usage</span> <span class="o">=</span> 
  <span class="s">&quot;</span><span class="se">\n</span><span class="s">usage:</span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;    fido [-a ipaddress] [-p port] [-s bitmapsize]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">welcome</span> <span class="o">=</span> 
  <span class="n">ANSI_COLOR_BLUE</span>
  <span class="s">&quot;   _  _      _ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot; / _|(_)    | |</span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;| |_  _   __| |  ___</span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;|  _|| | / _` | / _ </span><span class="se">\\</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;| |  | || (_| || (_) |</span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="s">&quot;|_|  |_| </span><span class="se">\\</span><span class="s">__,_| </span><span class="se">\\</span><span class="s">___/ </span><span class="se">\n</span><span class="s">&quot;</span>
  <span class="n">ANSI_COLOR_RESET</span><span class="p">;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">versionmsg</span> <span class="o">=</span>
  <span class="n">ANSI_COLOR_MAGENTA</span>
  <span class="s">&quot;version &quot;</span>
  <span class="n">__VERSION__</span>
  <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span>
  <span class="n">ANSI_COLOR_RESET</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h1>Macros</h1>

<p>Macro purpose varies greatly, but as all macros, the below generally just
make my coding life easier.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Message Printers</h2>

<p>These are the macros used to easily print the messages from the above
section.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <h3>usage_msg</h3>

<p>Call this 'method' in your code, and the usage statement will be printed
using print_msg.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define usage_msg() print_msg(usage);</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h3>oh<em>noes</em>msg</h3>

<p>Call this 'method' in your code, and the ohnoes ascii art will be printed
using print_msg.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define oh_noes_msg() print_msg(ohnoes);</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h3>welcome_msg</h3>

<p>Call this 'method' in your code, and the logo ascii art will be printed
using print_msg.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define welcome_msg() print_msg(welcome);</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h3>version_msg</h3>

<p>Call this 'method' in your code, and the version statement will be printed
using print_msg.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define version_msg() print_msg(versionmsg);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>Error Handling</h2>

<p>These are the error handling macros.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <h3>oh_noes</h3>

<p>This is a catastrophic failure message. Basically anytime the app hits
a fatal error, it calls this with a message, and it in turn prints out
ohnoes from above, prints the passed in message, prints a usage statement,
and then exits with code 1.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#define oh_noes(M, ...) oh_noes_msg(); print_msg(M, ##__VA_ARGS__); usage_msg(); exit(1);</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>End of <code>#ifndef _fido_h</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cp">#endif</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 